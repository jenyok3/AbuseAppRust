# Next Session Plan - Abuse-App

## Snapshot (2026-02-23)

### Оновлення сьогодні
- Іконки: `src-tauri/icons/icon.ico` перегенеровано з повним набором розмірів (16–256) для нормального розміру в taskbar.
- Телеграм: скорочені логи запуску/завершення до `Запущено {project}` / `Завершено {project}`; додано лог у `handleCloseAllOpenedAccounts`.
- Telegram лог: зберігається правильний регістр назви проєкту (через `lastLaunchProjectRef`).
- Telegram: селект "Фільтр за #" зроблено компактнішим (менша ширина, стрілка ближче до тексту, вузький dropdown).
- Календар у DailyTasksPanel: минулі дні тьмяніші; майбутні дні інших місяців не тьмяні; підсвітка дня кругла і по центру.
- Додано локальний "логін" по Telegram юзернейму (без OAuth):
  - Модалка першого запуску з полем `@username` та "Пропустити".
  - Профіль у сайдбарі відкриває модалку з тим самим вводом.
  - Валідація: 5–32 символи, тільки латиниця/цифри/`_`.
  - Розмиття фону та стилізація модалок під дизайн.
  - Збереження в localStorage (`authUser`, `authOnboardingSeen`).

### Поточний стан
- Останній пуш у `origin/main` виконано.
- Коміт: `7d86cbb7` (`Update UI reminders, hashtag launch sync, and recent logs`).
- `npm run check` проходить.
- Додано: модалка "Своє посилання" без збереження в список проєктів, автофокус/вставка в інпут, спроби прибрати підказки збережених даних.
- Масовий запуск: кнопка біля прогресу одна (продовжити/завершити). "Завершити" тепер скасовує запуск під час процесу, закриває запущені процеси, чистить `pendingProfiles` і стан запуску. Спінер на кнопках прибрано.
- `npm run check` проходить (після змін).

### Важливо
- Попередня спроба збірки (`npm run build` та `npm run tauri build`) падала з `spawn EPERM` (tsx/esbuild) у цьому середовищі.
- Це виглядає як обмеження середовища/прав доступу, а не логічна помилка коду.

## Що перевірити на початку наступної сесії
1. Запустити локально:
- `npm run check`
- `npm run dev`
- `npm run tauri:dev`

2. Перевірити вручну сценарії:
- Daily: редагування задачі, відкриття календаря, автозаповнення поточної дати, валідація часу.
- Відображення нагадування в задачі: маленький годинник біля назви, без показу дати/часу в рядку задачі.
- Поведінка при `completed`: прибирається `Нагадано` і скидається активне нагадування.
- Масовий запуск по `#`: у віджеті мають заповнюватися `Виберіть проєкт`, `Початок`, `Кінець` + коректний прогрес.
- Віджет `Останні дії`: без шумних технічних записів.
- Масовий запуск: одна кнопка біля прогресу перемикається між "Завершити" (під час запуску) і "Продовжити" (коли є черга).
- "Своє посилання": модалка відкривається з фокусом, посилання не зберігаються у списку проєктів.

3. Зробити свіжий білд для тестера:
- `npm run tauri build`
- перевірити артефакти:
  - `src-tauri/target/release/bundle/msi/AbuseApp_1.0.0_x64_en-US.msi`
  - `src-tauri/target/release/bundle/nsis/AbuseApp_1.0.0_x64-setup.exe`

## Якщо знову буде EPERM
1. Перевірити запуск термінала від імені адміністратора.
2. Почистити кеш/перевстановити залежності:
- видалити `node_modules` та lock/cache за потреби
- `npm install`
- повторити `npm run build` / `npm run tauri build`
3. Окремо перевірити, чи не блокує антивірус `esbuild.exe`.

## Файли, де були ключові правки сьогодні
- `client/src/components/AuthOnboardingModal.tsx`
- `client/src/App.tsx`
- `client/src/components/Sidebar.tsx`
- `client/src/components/ui/dialog.tsx`
- `client/src/components/DailyTasksPanel.tsx`
- `client/src/components/ui/select.tsx`
- `client/src/components/DailyReminderScheduler.tsx`
- `client/src/pages/Telegram.tsx`
- `client/src/lib/localStore.ts`
- `client/src/hooks/use-dashboard.ts`
- `client/src/components/ProjectModal.tsx`
- `client/src/components/CustomLinkModal.tsx`
- `client/src/pages/Settings.tsx`
- `client/src/pages/Telegram.tsx` (кнопка завершення/продовження, скасування запуску)
- `client/src/components/CustomLinkModal.tsx` (фокус, автозаповнення)
- `src-tauri/icons/icon.ico`

## Нотатка
- У репозиторії є багато сторонніх/службових файлів у останньому коміті (зокрема кеші/зображення). Якщо потрібно, зробити окремий cleanup-коміт наступною сесією.
- Невирішено: клік по системному повідомленню-нагадуванню не відкриває застосунок. Потрібно знайти місце створення нотифікації і додати handler на click/open (Tauri).
